
CREATE TABLE IF NOT EXISTS SOURCES (
    ID BIGINT AUTO_INCREMENT NOT NULL,
    NAME VARCHAR(128) NOT NULL,
    PATH VARCHAR(256) NOT NULL,
    PRIMARY KEY(ID)
);

CREATE TABLE IF NOT EXISTS GAMES (
    ID BIGINT AUTO_INCREMENT NOT NULL,
    SOURCE_ID BIGINT NOT NULL,
    WHITE VARCHAR(64) NOT NULL,
    WHITE_ELO VARCHAR(8),
    BLACK VARCHAR(64) NOT NULL,
    BLACK_ELO VARCHAR(8),
    EVENT VARCHAR(128),
    SITE VARCHAR(128),
    EVENT_DATE DATE,
    TIME_CONTROL VARCHAR(32),
    ROUND INT,
    GAME_DATE DATE NOT NULL,
    RESULT VARCHAR(8) NOT NULL,
    ECO VARCHAR(4),
    FEN VARCHAR(128),
    MOVE_COUNT INT NOT NULL DEFAULT 0,
    MOVES BLOB NOT NULL,
    PRIMARY KEY(ID)
);

CREATE TABLE IF NOT EXISTS POSITIONS (
    ID BIGINT AUTO_INCREMENT NOT NULL,
    BITBOARDHASH BIGINT NOT NULL,
    FEN VARCHAR(128) NOT NULL,
    CREATED DATE NOT NULL,
    PRIMARY KEY(ID)
);

CREATE TABLE IF NOT EXISTS GAMEPOSITIONS (
    ID BIGINT AUTO_INCREMENT NOT NULL,
    GAME_ID BIGINT NOT NULL,
    POS_ID BIGINT NOT NULL,
    PRIMARY KEY(ID)
);
